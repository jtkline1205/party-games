var app = angular.module("codenamesApp", []);
app.controller("CodenamesCtrl", CodenamesCtrl);

function CodenamesCtrl() {
	let wordBank = [
		"Copper",
		"Jack",
		"Strike",
		"Kangaroo",
		"Shakespeare",
		"Engine",
		"Bolt",
		"China",
		"Shop",
		"Needle",
		"Mercury",
		"Roulette",
		"Lap",
		"Life",
		"Fly",
		"Pit",
		"Root",
		"Penguin",
		"Robin",
		"Bridge",
		"Band",
		"Fire",
		"Whip",
		"Octopus",
		"Well",
		"Hollywood",
		"Gas",
		"Cast",
		"Pin",
		"Washington",
		"Glass",
		"Bear",
		"Pole",
		"Apple",
		"Cold",
		"Cricket",
		"Snow",
		"Trunk",
		"Pipe",
		"Novel",
		"Fence",
		"Capital",
		"Court",
		"Spring",
		"Scorpion",
		"Canada",
		"Mine",
		"Turkey",
		"Train",
		"Field",
		"Carrot",
		"Flute",
		"Lawyer",
		"Satellite",
		"Cover",
		"Cell",
		"Lead",
		"Watch",
		"Poison",
		"Tower",
		"Compound",
		"Slug",
		"Bar",
		"File",
		"Orange",
		"Temple",
		"Pupil",
		"Plot",
		"Pie",
		"Knight",
		"Slip",
		"Tablet",
		"Green",
		"Pass",
		"Berlin",
		"Face",
		"Oil",
		"Superhero",
		"Point",
		"Tube",
		"Tick",
		"Gold",
		"Fighter",
		"Wake",
		"Organ",
		"Jam",
		"Straw",
		"Switch",
		"Ninja",
		"Olympus",
		"Check",
		"Queen",
		"March",
		"Contract",
		"Park",
		"Figure",
		"Missile",
		"Paste",
		"Fall",
		"Scale",
		"Sock",
		"Nut",
		"Moscow",
		"Palm",
		"Track",
		"Force",
		"Net",
		"Moon",
		"Bow",
		"Degree",
		"Nail",
		"Giant",
		"Button",
		"Film",
		"Mug",
		"Concert",
		"Card",
		"Horn",
		"Plastic",
		"Dwarf",
		"Pound",
		"Sub",
		"Australia",
		"Limousine",
		"Diamond",
		"Whale",
		"Night",
		"String",
		"Pan",
		"Bond",
		"Game",
		"Washer",
		"Teacher",
		"Pumpkin",
		"New York",
		"Foot",
		"Princess",
		"Time",
		"Tie",
		"Table",
		"Tag",
		"Ice",
		"France",
		"Block",
		"Match",
		"Iron",
		"Air",
		"Calf",
		"Lemon",
		"Bell",
		"Wind",
		"Kid",
		"Nurse",
		"Leprechaun",
		"Czech",
		"Back",
		"Ground",
		"Note",
		"Bottle",
		"Forest",
		"Cycle",
		"Telescope",
		"Drill",
		"Date",
		"Aztec",
		"Maple",
		"Death",
		"Stock",
		"Skyscraper",
		"Laser",
		"Tap",
		"Mouth",
		"Spell",
		"Grass",
		"Cliff",
		"Lab",
		"Europe",
		"Soul",
		"Square",
		"Greece",
		"Server",
		"School",
		"Microscope",
		"Jet",
		"Pants",
		"Wall",
		"Plane",
		"Rome",
		"Hand",
		"Swing",
		"Disease",
		"Port",
		"Spy",
		"Unicorn",
		"Soldier",
		"Berry",
		"Fair",
		"Screen",
		"King",
		"Pitch",
		"Staff",
		"Marble",
		"Tooth",
		"Play",
		"Revolution",
		"Cook",
		"Code",
		"Kiwi",
		"Robot",
		"Embassy",
		"Row",
		"Pistol",
		"Spike",
		"Scientist",
		"Van",
		"Vet",
		"Shark",
		"Jupiter",
		"Bed",
		"Circle",
		"Space",
		"Hook",
		"Smuggler",
		"England",
		"Trip",
		"Crane",
		"Ghost",
		"Boot",
		"Mouse",
		"War",
		"Stadium",
		"Dragon",
		"Chocolate",
		"Suit",
		"Shot",
		"Cat",
		"Ketchup",
		"Witch",
		"America",
		"Ivory",
		"Heart",
		"Hood",
		"Buffalo",
		"Deck",
		"Atlantis",
		"Vacuum",
		"Seal",
		"Cross",
		"Star",
		"Pool",
		"Horse",
		"Pirate",
		"Key",
		"Alien",
		"Dice",
		"Ship",
		"Cap",
		"Triangle",
		"Thumb",
		"Antarctica",
		"Scuba Diver",
		"Africa",
		"Box",
		"Mount",
		"Hole",
		"Beat",
		"Head",
		"Litter",
		"Post",
		"Ray",
		"Cloak",
		"Board",
		"Bermuda",
		"Arm",
		"Log",
		"Loch Ness",
		"Rock",
		"London",
		"Pilot",
		"Casino",
		"Centaur",
		"Shadow",
		"Duck",
		"Ring",
		"Parachute",
		"Hotel",
		"Snowman",
		"Helicopter",
		"Horseshoe",
		"Honey",
		"Club",
		"Sink",
		"Rose",
		"Change",
		"Lion",
		"Police",
		"Wave",
		"Car",
		"Light",
		"Belt",
		"Chest",
		"Yard",
		"Glove",
		"Stream",
		"Platypus",
		"Stick",
		"Chair",
		"Water",
		"Hawk",
		"Battery",
		"Spot",
		"Piano",
		"Dog",
		"Conductor",
		"Model",
		"Tokyo",
		"Theater",
		"Egypt",
		"Mail",
		"Undertaker",
		"Sound",
		"Paper",
		"Amazon",
		"Luck",
		"Part",
		"Bugle",
		"Germany",
		"Fork",
		"Round",
		"India",
		"Shoe",
		"Mole",
		"Cotton",
		"Fish",
		"Ball",
		"Doctor",
		"Day",
		"Millionaire",
		"Himalayas",
		"Crown",
		"Opera",
		"Pyramid",
		"Charge",
		"Beach",
		"Plate",
		"Line",
		"Buck",
		"Agent",
		"Thief",
		"Bark",
		"Ruler",
		"Bomb",
		"Dinosaur",
		"Bill",
		"Center",
		"Chick",
		"Eagle",
		"Genius",
		"Beijing",
		"Racket",
		"Torch",
		"State",
		"Fan",
		"Web",
		"Drop",
		"Phoenix",
		"Church",
		"Knife",
		"Hospital",
		"Saturn",
		"Dress",
		"Ambulance",
		"Bug",
		"Mint",
		"Bat",
		"Mass",
		"Dance",
		"Link",
		"Crash",
		"Tail",
		"Olive",
		"Grace",
		"Angel",
		"Spider",
		"Ham",
		"Draft",
		"Rabbit",
		"Ice Cream",
		"Boom",
		"Bank",
		"Worm",
		"Alps",
		"Brush",
		"Lock",
		"Mexico",
		"Eye",
		"Spine",
		"Press",
		"Comic",
		"Mammoth"
	];
	
	//Choose 25 random words
	let wordSet = new Set();
	while (wordSet.size < 25) {
		wordSet.add(wordBank[Math.floor(Math.random()*wordBank.length)]);
	}

	let colorFreqs = [8, 8, 7, 1];
	let colorNames = ["red", "blue", "brown", "black"];
	
	let firstTeamIndex = Math.floor(Math.random()*2);
	colorFreqs[firstTeamIndex]++;
	this.currentTeam = colorNames[firstTeamIndex];
	
	let index = 0;
	let counter = 0;
	this.rowList = [];
	this.rowList.push([]);
	
	wordSet.forEach(function(word) {
		if (counter < 5) {
			let randomColor = Math.floor(Math.random()*4);
			while (colorFreqs[randomColor] == 0) {
				randomColor = Math.floor(Math.random()*4);
			}
			colorFreqs[randomColor]--;
			let team=colorNames[randomColor];
			this.rowList[index].push({
					"word" : word,
					"team" : team
			});
			counter = (counter+1)%5;
		} 
		if (counter==0) {
			index++;
			this.rowList.push([]);
		}
	}, this);
	
	this.revealButton = function($scope) {
		$scope.clicked = true;
	}

}